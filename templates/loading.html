<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loading - Mental Health Assessment Tool</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Animated Background -->
    <div class="animated-bg">
        <div class="bg-shape shape-1"></div>
        <div class="bg-shape shape-2"></div>
        <div class="bg-shape shape-3"></div>
        <div class="bg-shape shape-4"></div>
        <div class="bg-shape shape-5"></div>
    </div>

    <div class="loading-container">
        <div class="loading-card">
            <div class="loading-header">
                <div class="loading-icon">
                    <i class="fas fa-heart-pulse"></i>
                </div>
                <h2>Welcome to Your Mental Health Journey</h2>
                <p>Please wait while we set up your personalized experience</p>
            </div>

            <div class="loading-spinner">
                <div class="spinner">
                    <div class="spinner-ring"></div>
                    <div class="spinner-ring"></div>
                    <div class="spinner-ring"></div>
                </div>
            </div>

            <div class="loading-steps">
                <div class="step active" data-step="1">
                    <div class="step-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="step-content">
                        <span class="step-title">Securing Your Session</span>
                        <span class="step-description">Verifying your authentication credentials</span>
                    </div>
                    <div class="step-status">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                </div>

                <div class="step" data-step="2">
                    <div class="step-icon">
                        <i class="fas fa-user-check"></i>
                    </div>
                    <div class="step-content">
                        <span class="step-title">Loading Your Profile</span>
                        <span class="step-description">Retrieving your personal information</span>
                    </div>
                    <div class="step-status">
                        <i class="fas fa-clock"></i>
                    </div>
                </div>

                <div class="step" data-step="3">
                    <div class="step-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div class="step-content">
                        <span class="step-title">Preparing Assessment</span>
                        <span class="step-description">Setting up your mental health evaluation</span>
                    </div>
                    <div class="step-status">
                        <i class="fas fa-clock"></i>
                    </div>
                </div>

                <div class="step" data-step="4">
                    <div class="step-icon">
                        <i class="fas fa-rocket"></i>
                    </div>
                    <div class="step-content">
                        <span class="step-title">Almost Ready</span>
                        <span class="step-description">Finalizing your personalized dashboard</span>
                    </div>
                    <div class="step-status">
                        <i class="fas fa-clock"></i>
                    </div>
                </div>
            </div>

            <div class="loading-progress">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <span class="progress-text" id="progressText">0%</span>
            </div>

            <div class="loading-tips">
                <h3>
                    <i class="fas fa-lightbulb"></i>
                    Did You Know?
                </h3>
                <div class="tip-content">
                    <p id="tipText">Regular mental health check-ins can help you maintain emotional well-being and catch potential issues early.</p>
                </div>
            </div>

            <!-- Security Notice -->
            <div class="security-notice">
                <i class="fas fa-shield-alt"></i>
                <span>Your data is encrypted and protected with enterprise-grade security</span>
            </div>
        </div>
    </div>

    <!-- Floating Elements -->
    <div class="floating-elements">
        <div class="floating-icon icon-1"><i class="fas fa-heart"></i></div>
        <div class="floating-icon icon-2"><i class="fas fa-brain"></i></div>
        <div class="floating-icon icon-3"><i class="fas fa-leaf"></i></div>
        <div class="floating-icon icon-4"><i class="fas fa-star"></i></div>
        <div class="floating-icon icon-5"><i class="fas fa-dove"></i></div>
    </div>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Animated Background */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .bg-shape {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            animation: float 6s ease-in-out infinite;
        }

        .shape-1 {
            width: 200px;
            height: 200px;
            top: 10%;
            left: 10%;
            animation-delay: 0s;
        }

        .shape-2 {
            width: 150px;
            height: 150px;
            top: 20%;
            right: 10%;
            animation-delay: 2s;
        }

        .shape-3 {
            width: 100px;
            height: 100px;
            bottom: 20%;
            left: 20%;
            animation-delay: 4s;
        }

        .shape-4 {
            width: 120px;
            height: 120px;
            bottom: 30%;
            right: 20%;
            animation-delay: 1s;
        }

        .shape-5 {
            width: 80px;
            height: 80px;
            top: 50%;
            left: 50%;
            animation-delay: 3s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        /* Container */
        .loading-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            position: relative;
        }

        /* Card */
        .loading-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
            padding: 3rem;
            text-align: center;
            max-width: 500px;
            width: 100%;
            animation: slideUp 0.8s ease-out;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Header */
        .loading-header {
            margin-bottom: 2rem;
        }

        .loading-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            animation: pulse 2s ease-in-out infinite;
            color: #667eea;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .loading-header h2 {
            color: #374151;
            margin-bottom: 0.5rem;
            font-size: 1.8rem;
            font-weight: 800;
        }

        .loading-header p {
            color: #6b7280;
            font-size: 1rem;
            line-height: 1.6;
        }

        /* Spinner */
        .loading-spinner {
            margin-bottom: 2rem;
        }

        .spinner {
            position: relative;
            width: 80px;
            height: 80px;
            margin: 0 auto;
        }

        .spinner-ring {
            position: absolute;
            width: 100%;
            height: 100%;
            border: 4px solid transparent;
            border-radius: 50%;
            animation: spin 2s linear infinite;
        }

        .spinner-ring:nth-child(1) {
            border-top-color: #667eea;
            animation-delay: 0s;
        }

        .spinner-ring:nth-child(2) {
            border-right-color: #764ba2;
            animation-delay: 0.3s;
            width: 70%;
            height: 70%;
            top: 15%;
            left: 15%;
        }

        .spinner-ring:nth-child(3) {
            border-bottom-color: #f093fb;
            animation-delay: 0.6s;
            width: 40%;
            height: 40%;
            top: 30%;
            left: 30%;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Loading Steps */
        .loading-steps {
            margin-bottom: 2rem;
        }

        .step {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border-radius: 12px;
            transition: all 0.5s ease;
            margin-bottom: 0.75rem;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
        }

        .step.active {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-color: #0ea5e9;
            transform: scale(1.02);
        }

        .step.completed {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border-color: #10b981;
        }

        .step-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .step.active .step-icon {
            background: #0ea5e9;
            color: white;
        }

        .step.completed .step-icon {
            background: #10b981;
            color: white;
        }

        .step-content {
            flex: 1;
            text-align: left;
        }

        .step-title {
            display: block;
            font-weight: 600;
            color: #374151;
            font-size: 1rem;
            margin-bottom: 0.25rem;
        }

        .step-description {
            display: block;
            color: #6b7280;
            font-size: 0.9rem;
        }

        .step.active .step-title {
            color: #0ea5e9;
        }

        .step.completed .step-title {
            color: #10b981;
        }

        .step-status {
            font-size: 1.2rem;
            color: #6b7280;
        }

        .step.active .step-status {
            color: #0ea5e9;
        }

        .step.completed .step-status {
            color: #10b981;
        }

        /* Progress Bar */
        .loading-progress {
            margin-bottom: 2rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 4px;
            transition: width 0.5s ease;
            width: 0%;
        }

        .progress-text {
            font-size: 0.9rem;
            font-weight: 600;
            color: #374151;
        }

        /* Loading Tips */
        .loading-tips {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border: 1px solid #e2e8f0;
        }

        .loading-tips h3 {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: #374151;
            margin-bottom: 1rem;
            font-size: 1.1rem;
            font-weight: 700;
        }

        .tip-content p {
            color: #6b7280;
            font-size: 0.95rem;
            line-height: 1.6;
            margin: 0;
        }

        /* Security Notice */
        .security-notice {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem 1.5rem;
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.2);
            border-radius: 12px;
            color: #065f46;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .security-notice i {
            color: #10b981;
            font-size: 1.1rem;
        }

        /* Floating Elements */
        .floating-elements {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .floating-icon {
            position: absolute;
            color: rgba(255, 255, 255, 0.1);
            font-size: 2rem;
            animation: floatIcon 8s ease-in-out infinite;
        }

        .icon-1 {
            top: 20%;
            left: 10%;
            animation-delay: 0s;
        }

        .icon-2 {
            top: 60%;
            right: 15%;
            animation-delay: 2s;
        }

        .icon-3 {
            bottom: 30%;
            left: 20%;
            animation-delay: 4s;
        }

        .icon-4 {
            top: 40%;
            right: 30%;
            animation-delay: 1s;
        }

        .icon-5 {
            bottom: 60%;
            left: 60%;
            animation-delay: 3s;
        }

        @keyframes floatIcon {
            0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.1; }
            50% { transform: translateY(-30px) rotate(180deg); opacity: 0.3; }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .loading-container {
                padding: 1rem;
            }

            .loading-card {
                padding: 2rem;
                border-radius: 20px;
            }

            .loading-header h2 {
                font-size: 1.6rem;
            }

            .step {
                padding: 0.875rem;
            }

            .step-icon {
                width: 35px;
                height: 35px;
                font-size: 1.1rem;
            }
        }

        @media (max-width: 480px) {
            .loading-card {
                padding: 1.5rem;
            }

            .loading-header h2 {
                font-size: 1.4rem;
            }

            .spinner {
                width: 60px;
                height: 60px;
            }

            .step {
                padding: 0.75rem;
                gap: 0.75rem;
            }
        }
    </style>

    <script>
        // Loading tips
        const tips = [
            "Regular mental health check-ins can help you maintain emotional well-being and catch potential issues early.",
            "Taking breaks and practicing mindfulness can significantly improve your mental health and productivity.",
            "Sleep quality directly affects your mental health. Aim for 7-9 hours of quality sleep each night.",
            "Physical exercise releases endorphins that naturally boost your mood and reduce stress.",
            "Connecting with friends and family regularly can provide emotional support and reduce feelings of isolation.",
            "Journaling your thoughts and feelings can help you process emotions and gain clarity about your mental state."
        ];

        let currentTip = 0;
        let currentStep = 0;
        let progress = 0;
        const steps = document.querySelectorAll('.step');
        const progressFill = document.getElementById('progressFill');
        const progressText = document.getElementById('progressText');
        const tipText = document.getElementById('tipText');

        // Update progress
        function updateProgress() {
            progress += 2;
            if (progress > 100) progress = 100;
            
            progressFill.style.width = progress + '%';
            progressText.textContent = progress + '%';
        }

        // Update steps
        function updateStep() {
            if (currentStep > 0) {
                steps[currentStep - 1].classList.add('completed');
                steps[currentStep - 1].classList.remove('active');
                steps[currentStep - 1].querySelector('.step-status').innerHTML = '<i class="fas fa-check"></i>';
            }
            
            if (currentStep < steps.length) {
                steps[currentStep].classList.add('active');
                currentStep++;
            }
        }

        // Update tips
        function updateTip() {
            tipText.style.opacity = '0';
            setTimeout(() => {
                tipText.textContent = tips[currentTip];
                tipText.style.opacity = '1';
                currentTip = (currentTip + 1) % tips.length;
            }, 300);
        }

        // Start loading sequence
        const progressInterval = setInterval(updateProgress, 100);
        const stepInterval = setInterval(updateStep, 2000);
        const tipInterval = setInterval(updateTip, 3000);

        // Clean up and redirect
        setTimeout(() => {
            clearInterval(progressInterval);
            clearInterval(stepInterval);
            clearInterval(tipInterval);
            
            // Mark all steps as completed
            steps.forEach(step => {
                step.classList.add('completed');
                step.classList.remove('active');
                step.querySelector('.step-status').innerHTML = '<i class="fas fa-check"></i>';
            });
            
            // Complete progress
            progressFill.style.width = '100%';
            progressText.textContent = '100%';
            
            // Redirect after a short delay
            setTimeout(() => {
                window.location.href = "{{ url_for('home') }}";
            }, 1000);
        }, 8000); // Total loading time: 8 seconds
    </script>
</body>
</html>